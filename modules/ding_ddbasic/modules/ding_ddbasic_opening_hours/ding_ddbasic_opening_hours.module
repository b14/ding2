<?php
/**
 * @file
 * Extending opening hours to match the ddbasic theme.
 */

/**
 * Implements hook_menu().
 */
function ding_ddbasic_opening_hours_menu() {
  $items = array();

  $items['admin/config/ding/ddbasic-opening-hours'] = array(
    'title' => 'Ding DDBasic opening hours',
    'description' => 'Opening hours settings for the DDBasic theme',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('ding_ddbasic_opening_hours_settings_form'),
    'access arguments' => array('administer site configuration'),
    'file' => 'ding_ddbasic_opening_hours.admin.inc',
  );

  return $items;
}

/**
 * Implements hook_init().
 */
function ding_ddbasic_opening_hours_init() {
  $item = menu_get_item();
  if ($item['path'] === 'node/%') {
    $node = menu_get_object();
    if ($node->type === 'ding_library' && variable_get('ding_ddbasic_opening_hours_expand_on_library', FALSE)) {
      drupal_add_js(array('ding_ddbasic_opening_hours_expand_on_library' => TRUE), 'setting');
    }
  }
}
